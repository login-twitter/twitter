define(["jquery","jqueryUI","PartialView","inputValidator"],function(e,t,n,r){"use strict";var i=n.extend({initialize:function(t){n.prototype.initialize.apply(this,[t]);var r=e(".captchaContainer input"),i={},s=this.view.context,o=this.view.requiredOnly,u=this.view.validationContent,a=this.view.validations,f=s.data.flow.indexOf("EU-UK-pps")>=0?u.captchaRequired:u.required;o[f]=a.required,i[f]=function(t){var n=e.extend({},this.options.validations);return delete n[f],this.check(t,n)?this.element.val():!0},r.inputValidator({state:"notification",validateOn:"blur keyup",restrictions:i}),e(".captchaRefresh").click(e.proxy(this.captchaRefresh,this))},captchaRefresh:function(t){t.preventDefault(),e.post("/webapps/merchantboarding/webflow/getCaptcha",{_csrf:this.view.context._csrf},function(t){e(".captchaContainer img").attr("src",t.captcha.captchaImageUrl),e(".captchaContainer a").attr("href",t.captcha.captchaAudioUrl),e(".captchaContainer input").val("").change(),e(".captchaContainer").show()},"json")},updateCaptchaData:function(t){e(".captchaContainer img",this.$el).attr("src",t.captchaImageUrl),e(".captchaContainer a",this.$el).attr("href",t.captchaAudioUrl),e(".captchaContainer input",this.$el).val("")},showCaptcha:function(){e(".captchaContainer",this.$el).show()},hideCaptcha:function(){e(".captchaContainer",this.$el).hide()}});return i})